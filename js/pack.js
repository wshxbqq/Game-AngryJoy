var walk=require("walk"),fs=require("fs"),options,walker,UglifyJS=require("uglify-js"),path=require("path");options={followLinks:!1},writeTextToFile=function(e,i){if(fs.existsSync(e))fs.writeFileSync(e,i,"utf-8");else{var r=e.split("\\");r.shift();for(var n="D:",l=0;l<r.length-1;l++)n+="\\"+r[l],fs.existsSync(n)||fs.mkdirSync(n);fs.writeFileSync(e,i,"utf-8")}},walker=walk.walk("D:/jdProject/Projects/AngryBird/client/js",options),walker.on("directories",function(e,i,r){r()}),walker.on("file",function(e,i,r){var n=path.join(e,i.name),l=UglifyJS.minify(n);console.log("string");var o=n.replace("client\\js","client\\js\\release");writeTextToFile(o,l.code),r()}),walker.on("errors",function(e,i,r){console.log("err"),r()}),walker.on("end",function(){console.log("all done")});